apiVersion: argoproj.io/v1alpha1
kind: ApplicationSet
metadata:
  name: guestbook
spec:
  generators:
  - list:
      elements:
      - namespace: s-testbox-01
      - namespace: s-testbox-02
      - namespace: s-testbox-01
      - namespace: s-testbox-02
      - namespace: s-testbox-03
      - namespace: s-testbox-04
      - namespace: s-testbox-05
      - namespace: s-testbox-06
      - namespace: s-testbox-07
      - namespace: s-testbox-08
      - namespace: s-testbox-09
      - namespace: s-testbox-10
      - namespace: s-testbox-11
      - namespace: s-testbox-12
      - namespace: s-testbox-13
      - namespace: s-testbox-14
      - namespace: s-testbox-15
      - namespace: s-testbox-16
      - namespace: s-testbox-17
      - namespace: s-testbox-18
      - namespace: s-testbox-19
      - namespace: s-testbox-20
      - namespace: s-testbox-21
      - namespace: s-testbox-22
      - namespace: s-testbox-23
      - namespace: s-testbox-24
      - namespace: s-testbox-25
      - namespace: s-testbox-26
      - namespace: s-testbox-27
      - namespace: s-testbox-28
      - namespace: s-testbox-29
      - namespace: s-testbox-30
      - namespace: s-testbox-31
      - namespace: s-testbox-32
      - namespace: s-testbox-33
      - namespace: s-testbox-34
      - namespace: s-testbox-35
      - namespace: s-testbox-36
      - namespace: s-testbox-37
      - namespace: s-testbox-38
      - namespace: s-testbox-39
      - namespace: s-testbox-40
      - namespace: s-testbox-41
      - namespace: s-testbox-42
      - namespace: s-testbox-43
      - namespace: s-testbox-44
      - namespace: s-testbox-45
      - namespace: s-testbox-46
      - namespace: s-testbox-47
      - namespace: s-testbox-48
      - namespace: s-testbox-49
      - namespace: s-testbox-50
      - namespace: s-testbox-51
      - namespace: s-testbox-52
      - namespace: s-testbox-53
      - namespace: s-testbox-54
      - namespace: s-testbox-55
      - namespace: s-testbox-56
      - namespace: s-testbox-57
      - namespace: s-testbox-58
      - namespace: s-testbox-59
      - namespace: s-testbox-60
      - namespace: s-testbox-61
      - namespace: s-testbox-62
      - namespace: s-testbox-63
      - namespace: s-testbox-64
      - namespace: s-testbox-65
      - namespace: s-testbox-66
      - namespace: s-testbox-67
      - namespace: s-testbox-68
      - namespace: s-testbox-69
      - namespace: s-testbox-70
      - namespace: s-testbox-71
      - namespace: s-testbox-72
      - namespace: s-testbox-73
      - namespace: s-testbox-74
      - namespace: s-testbox-75
      - namespace: s-testbox-76
      - namespace: s-testbox-77
      - namespace: s-testbox-78
      - namespace: s-testbox-79
      - namespace: s-testbox-80
      - namespace: s-testbox-81
      - namespace: s-testbox-82
      - namespace: s-testbox-83
      - namespace: s-testbox-84
      - namespace: s-testbox-85
      - namespace: s-testbox-86
      - namespace: s-testbox-87
      - namespace: s-testbox-88
      - namespace: s-testbox-89
      - namespace: s-testbox-90
      - namespace: s-testbox-91
      - namespace: s-testbox-92
      - namespace: s-testbox-93
      - namespace: s-testbox-94
      - namespace: s-testbox-95
      - namespace: s-testbox-96
      - namespace: s-testbox-97
      - namespace: s-testbox-98
      - namespace: s-testbox-99
      - namespace: s-testbox-100
      - namespace: s-testbox-101
      - namespace: s-testbox-102
      - namespace: s-testbox-103
      - namespace: s-testbox-104
      - namespace: s-testbox-105
      - namespace: s-testbox-106
      - namespace: s-testbox-107
      - namespace: s-testbox-108
      - namespace: s-testbox-109
      - namespace: s-testbox-110
      - namespace: s-testbox-111
      - namespace: s-testbox-112
      - namespace: s-testbox-113
      - namespace: s-testbox-114
      - namespace: s-testbox-115
      - namespace: s-testbox-116
      - namespace: s-testbox-117
      - namespace: s-testbox-118
      - namespace: s-testbox-119
      - namespace: s-testbox-120
      - namespace: s-testbox-121
      - namespace: s-testbox-122
      - namespace: s-testbox-123
      - namespace: s-testbox-124
      - namespace: s-testbox-125
      - namespace: s-testbox-126
      - namespace: s-testbox-127
      - namespace: s-testbox-128
      - namespace: s-testbox-129
      - namespace: s-testbox-130
      - namespace: s-testbox-131
      - namespace: s-testbox-132
      - namespace: s-testbox-133
      - namespace: s-testbox-134
      - namespace: s-testbox-135
      - namespace: s-testbox-136
      - namespace: s-testbox-137
      - namespace: s-testbox-138
      - namespace: s-testbox-139
      - namespace: s-testbox-140
      - namespace: s-testbox-141
      - namespace: s-testbox-142
      - namespace: s-testbox-143
      - namespace: s-testbox-144
      - namespace: s-testbox-145
      - namespace: s-testbox-146
      - namespace: s-testbox-147
      - namespace: s-testbox-148
      - namespace: s-testbox-149
      - namespace: s-testbox-150
      - namespace: s-testbox-151
      - namespace: s-testbox-152
      - namespace: s-testbox-153
      - namespace: s-testbox-154
      - namespace: s-testbox-155
      - namespace: s-testbox-156
      - namespace: s-testbox-157
      - namespace: s-testbox-158
      - namespace: s-testbox-159
      - namespace: s-testbox-160
      - namespace: s-testbox-161
      - namespace: s-testbox-162
      - namespace: s-testbox-163
      - namespace: s-testbox-164
      - namespace: s-testbox-165
      - namespace: s-testbox-166
      - namespace: s-testbox-167
      - namespace: s-testbox-168
      - namespace: s-testbox-169
      - namespace: s-testbox-170
      - namespace: s-testbox-171
      - namespace: s-testbox-172
      - namespace: s-testbox-173
      - namespace: s-testbox-174
      - namespace: s-testbox-175
      - namespace: s-testbox-176
      - namespace: s-testbox-177
      - namespace: s-testbox-178
      - namespace: s-testbox-179
      - namespace: s-testbox-180
      - namespace: s-testbox-181
      - namespace: s-testbox-182
      - namespace: s-testbox-183
      - namespace: s-testbox-184
      - namespace: s-testbox-185
      - namespace: s-testbox-186
      - namespace: s-testbox-187
      - namespace: s-testbox-188
      - namespace: s-testbox-189
      - namespace: s-testbox-190
      - namespace: s-testbox-191
      - namespace: s-testbox-192
      - namespace: s-testbox-193
      - namespace: s-testbox-194
      - namespace: s-testbox-195
      - namespace: s-testbox-196
      - namespace: s-testbox-197
      - namespace: s-testbox-198
      - namespace: s-testbox-199
      - namespace: s-testbox-200
      - namespace: s-testbox-201
      - namespace: s-testbox-202
      - namespace: s-testbox-203
      - namespace: s-testbox-204
      - namespace: s-testbox-205
      - namespace: s-testbox-206
      - namespace: s-testbox-207
      - namespace: s-testbox-208
      - namespace: s-testbox-209
      - namespace: s-testbox-210
      - namespace: s-testbox-211
      - namespace: s-testbox-212
      - namespace: s-testbox-213
      - namespace: s-testbox-214
      - namespace: s-testbox-215
      - namespace: s-testbox-216
      - namespace: s-testbox-217
      - namespace: s-testbox-218
      - namespace: s-testbox-219
      - namespace: s-testbox-220
      - namespace: s-testbox-221
      - namespace: s-testbox-222
      - namespace: s-testbox-223
      - namespace: s-testbox-224
      - namespace: s-testbox-225
      - namespace: s-testbox-226
      - namespace: s-testbox-227
      - namespace: s-testbox-228
      - namespace: s-testbox-229
      - namespace: s-testbox-230
      - namespace: s-testbox-231
      - namespace: s-testbox-232
      - namespace: s-testbox-233
      - namespace: s-testbox-234
      - namespace: s-testbox-235
      - namespace: s-testbox-236
      - namespace: s-testbox-237
      - namespace: s-testbox-238
      - namespace: s-testbox-239
      - namespace: s-testbox-240
      - namespace: s-testbox-241
      - namespace: s-testbox-242
      - namespace: s-testbox-243
      - namespace: s-testbox-244
      - namespace: s-testbox-245
      - namespace: s-testbox-246
      - namespace: s-testbox-247
      - namespace: s-testbox-248
      - namespace: s-testbox-249
      - namespace: s-testbox-250
      - namespace: s-testbox-251
      - namespace: s-testbox-252
      - namespace: s-testbox-253
      - namespace: s-testbox-254
      - namespace: s-testbox-255
      - namespace: s-testbox-256
      - namespace: s-testbox-257
      - namespace: s-testbox-258
      - namespace: s-testbox-259
      - namespace: s-testbox-260
      - namespace: s-testbox-261
      - namespace: s-testbox-262
      - namespace: s-testbox-263
      - namespace: s-testbox-264
      - namespace: s-testbox-265
      - namespace: s-testbox-266
      - namespace: s-testbox-267
      - namespace: s-testbox-268
      - namespace: s-testbox-269
      - namespace: s-testbox-270
      - namespace: s-testbox-271
      - namespace: s-testbox-272
      - namespace: s-testbox-273
      - namespace: s-testbox-274
      - namespace: s-testbox-275
      - namespace: s-testbox-276
      - namespace: s-testbox-277
      - namespace: s-testbox-278
      - namespace: s-testbox-279
      - namespace: s-testbox-280
      - namespace: s-testbox-281
      - namespace: s-testbox-282
      - namespace: s-testbox-283
      - namespace: s-testbox-284
      - namespace: s-testbox-285
      - namespace: s-testbox-286
      - namespace: s-testbox-287
      - namespace: s-testbox-288
      - namespace: s-testbox-289
      - namespace: s-testbox-290
      - namespace: s-testbox-291
      - namespace: s-testbox-292
      - namespace: s-testbox-293
      - namespace: s-testbox-294
      - namespace: s-testbox-295
      - namespace: s-testbox-296
      - namespace: s-testbox-297
      - namespace: s-testbox-298
      - namespace: s-testbox-299
      - namespace: s-testbox-300
  template:
    metadata:
      name: '{{namespace}}'
    spec:
      project: default
      source:
        repoURL: https://github.com/alikayim/gitops-example.git
        targetRevision: HEAD
        path: test/
      destination:
        server: https://kubernetes.default.svc
        namespace: '{{namespace}}'
      syncPolicy:
        automated:
          prune: true
          selfHeal: true
        syncOptions:
          - CreateNamespace=true

#apiVersion: argoproj.io/v1alpha1
#kind: Application
#metadata:
#  name: guestbook
#  namespace: argocd
#spec:
#  project: default
#  source:
#    repoURL: https://github.com/argoproj/argocd-example-apps.git
#    targetRevision: HEAD
#    path: guestbook
#  destination:
#    server: https://kubernetes.default.svc
#    namespace: guestbook
#
